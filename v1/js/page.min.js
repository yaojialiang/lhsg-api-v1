





var area=new Area({name:'lhsg',baseUrl:window.location.href.match(/.*?\/\/.*?\//)[0], projectUrl:'http://202.99.114.152:24007/v1/html/',});var store={};var authInfo=null;var productInfo=null;function getProductInfo(carrierId){var obj={contentId:"lhsg",serviceId:"lhsgby25",productId:'lhsgby25@'+carrierId,goodsid:'',productName:'飞咪玩具',}
if(carrierId=='201'){obj.goodsid='V321300000073'}
else if(carrierId=='211'){obj.serviceId='lhsg30t30';obj.productId='lhsg30t30@211';}
return obj;}
function defSureRules(btnDom,btnCls,btnIdx){ var url=btnDom.getAttribute('url')||''; var type=btnDom.getAttribute('type')||''; var source_id=btnDom.getAttribute('source_id')||''; var tag_id=btnDom.getAttribute('return_tag_id')||btnDom.getAttribute('tag_id')||''; var is_free=btnDom.getAttribute('is_free')||''; var source_name=btnDom.getAttribute('source_name')||btnDom.getAttribute('display_disc')||''; if(btnCls=='headerBtn'){if(btnDom.getAttribute('menu_id')=='9'){window.location.href=area.projectUrl+'html/myhouse.html';}
else if(btnDom.getAttribute('menu_id')=='1'){window.location.href=area.projectUrl+'html/favorite.html';}
else if(btnDom.getAttribute('menu_id')=='2'||btnDom.getAttribute('menu_id')=='3'||btnDom.getAttribute('menu_id')=='5'||btnDom.getAttribute('menu_id')=='7'){window.location.href=area.projectUrl+'html/secondary.html?menu_id='+btnDom.getAttribute('menu_id');}} 
else if(btnCls=='navBtn'){ if(btnDom.className.indexOf('search')!=-1){jumpIntoStack(area.projectUrl+'html/search.html');}
else if(btnDom.className.indexOf('vip')!=-1){ if(authInfo&&authInfo.result==0){HCEPG.UI.tips('您已经订购该产品')} 
else{order(productInfo.contentId,productInfo.serviceId,productInfo.productId,productInfo.UserToken,encodeURIComponent(window.location.href.split('?')[0]+'?'+HCEPG.Func.formatParams(store)))}}} 
else if(type=='2'&&(tag_id&&tag_id>0)){jumpIntoStack(area.projectUrl+'html/album.html?ctype=1&tag_ids='+tag_id)} 
else if(type=='1'&&(source_id&&source_id>0)){ if(authInfo&&authInfo.result==0){window.location.href=area.projectUrl+'html/video.html?source_id='+source_id+'&is_free='+is_free+'&videoUrl='+encodeURIComponent(url)+'&UserID='+area.userId+'&ReturnURL='+encodeURIComponent(window.location.href.split('?')[0]+'?'+HCEPG.Func.formatParams(store))+'&source_name='+source_name} 
else{order(productInfo.contentId,productInfo.serviceId,productInfo.productId,productInfo.UserToken,encodeURIComponent(window.location.href.split('?')[0]+'?'+HCEPG.Func.formatParams(store)))}}}
function jumpIntoStack(url){historyUrl=window.location.href.split('?')[0]+'?'+HCEPG.Func.formatParams(store)
area.pushStack(historyUrl);window.location.href=url;}
function order(contentId,serviceId,productId,UserToken,returnUrl){window.location.href="http://202.99.114.14:10020/"
+"ACS/vas/serviceorder?SPID=96596"
+"&UserID="+area.userId
+"&ContentID="+contentId
+"&ServiceID="+serviceId
+"&ProductID="+productId
+"&UserToken="+UserToken
+"&Action=1&OrderMode=1&ReturnURL="+encodeURIComponent(area.projectUrl+"html/orderBack.html?orderBackUrl="+encodeURIComponent(returnUrl))
+"&ContinueType=1&Lang=zh&notificationURL="
+"&unsubNotificationURL=";}
function pageInit(){var pagePromiseAll=[new MyPromise(function(resolve,reject){resolve()})];pagePromiseAll.push(area.init().then(function(){ productInfo=getProductInfo(area.carrierId);var promiseAll=[new MyPromise(function(resolve,reject){resolve()})]
promiseAll.push(api.authorization({userId:area.userId,contentId:productInfo.contentId,serviceId:productInfo.serviceId,productId:'',UserToken:area.UserToken,}).then(function(res){return new MyPromise(function(resolve,reject){authInfo=res;resolve();})}))
return MyPromise.all(promiseAll)}))}